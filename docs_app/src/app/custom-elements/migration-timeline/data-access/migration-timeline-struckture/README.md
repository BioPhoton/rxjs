# Data structure for the Migration-Timeline
The structure aims to be autogenerated from the code in the future.

It links the message in the sourcecode following the pattern:
`<HumanReadableShortMessage> - see <LinkToMigrationTimeLineItemInDocs>`

with the related migration item.

It's an array of `MigrationReleaseItem` items.

## MigrationRelease

The migration time-line consists out of a list of `MigrationRelease` items.

A `MigrationRelease` has following structure:
```typescript
export interface MigrationRelease extends MigrationReleaseUIDFields {
  date: string;
  deprecations: Deprecation[];
  breakingChanges: BreakingChange[];
  refactorTooling: RefactorTooling[];
}
```

## Deprecation
The Deprecation item describes a introduced deprecation in the source code.
It is always     linked with a BreakingChange (even if version range is open) or a Rollback
It is optionally linked with **one** RefactorTooling

## BreakingChange
Marks the version of the breaking change
It is always linked with a Deprecation or a Rollback

## RefactorTooling
Marks the version from which on tooling for automated refactoring is available and its target version.
It is always linked to the tooling lib.
It is always one single set of instructions 
that refactors one or multiple deprecations (can also get introduced in the future) 
e.g. Linting rules. A set of instructions could be
one or many lint rules executed together (rxjs-collapse-imports and rxjs-proper-imports)

```typescript
/*
@type MigrationItemTypeRefactorTooling
*/
export type MigrationItemTypeRefactorTooling = 'refactorTooling';

interface RefactorTooling {
    title: string;
    sourceLink: string;
    itemType: MigrationItemTypeRefactorTooling;
    subject: string;
    subjectSymbol: RefactorToolingSubjectSymbols;
    subjectAction?: string;
    // Version range to refactor to e.g. v6.
    targetVersion: string;
    // What will the tooling do.
    description: string;
    // How can I use it
    usage: string;
    // @TODO refactor to TransitionAware interface
    exampleBeforeDependencies?: {[lib: string]: string};
    exampleBefore: string;
    exampleAfterDependencies?: {[lib: string]: string};
    exampleAfter: string;
}

// UID: 5.5.5_refactorTooling-TSLintingRule-rxjsProperImports
const refactorToolingItem: RefactorTooling = {
    itemType: "refactorTooling",
    subject: "rxjsProperImports",
    subjectSymbol: "TSLintingRule",
    title: 'TSLint rules to refactor imports',
    description: `
      A rules that collapses multiple imports from rxjs to a single one.
      It allows you to automatically migrate your imports from RxJS 5 to RxJS 6.
    `,
    targetVersion: '6',
    exampleBeforeDependencies: {},
    exampleBefore: `import { Observable } from 'rxjs/Rx';`,
    exampleAfterDependencies: {},
    exampleAfter: `import { Observable } from 'rxjs';`,
    sourceLink: 'https://github.com/ReactiveX/rxjs-tslint.',
    usage: `
    To use the rules use the rulesDirectory configuration property of \`tslint.json\`:
    \`\`\`json
    {
      "rulesDirectory": [
        "node_modules/rxjs-tslint"
      ],
      "rules": {
        "rxjs-proper-imports": true
        "rxjs-collapse-imports": true
      }
    }
    \`\`\`
    To lint your project use:
    \`./node_modules/.bin/tslint -c tslint.json -p tsconfig.json\`
    `
}
```

## GeneralInformation
Gives information about 
It is one or multiple manual steps or pieces of information related to ??a version??

```typescript

interface GeneralInformation {
  title: string;
  reason: string;
  implication: string;
}

// UID: 5.5.5_generalInformation-???
const generalInformationItem: GeneralInformation = {
      title: 'General release information for version 5.5.5',
      reason: `The folder structure change from 6.0.0-alpha.0 to 6.0.0-alpha.1 to reduce the number of different import paths.`,
      implication: `The change in folder structure and import paths means for the caller to refactor the imports to the new way.`
}
// UID: 5.5.5_generalInformation-???
const generalInformationItem: GeneralInformation = {
      title: ' RxJS v5.x to v6 Update Guide',
      reason: `The folder structure change from 6.0.0-alpha.0 to 6.0.0-alpha.1 to reduce the number of different import paths.`,
      implication: `    
      A backward-compatibility layer eases the update process, allowing you to keep your apps working while you address most code changes at your own pace. The overall process can be carried out in stages:
      
      Preconditions:
      Installed version 5.5.x of rxjs.
      
      Migration Steps:
      1. Install RxJS v6 along with the backward-compatibility package, rxjs-compat.
      2. If your app is affected by the few breaking changes not covered by rxjs-compat, update the affected code according to the instructions provided below.
      3. Eventually, you will want to drop the compatibility layer to complete the update to RxJS v6. Doing so will significantly decrease the size of your apps. 
      4. To refactor TypeScript code so that it doesn't depend on rxjs-compat, you can use rxjs-tslint.
      npm i -g rxjs-tslint
      rxjs-5-to-6-migrate -p [path/to/tsconfig.json]
      5. Remove and replace all use of deprecated functionality.
      `
}

```

---

#Example date:

```typescript
const migrationReleaseItems: MigrationReleaseItem[] = [
 {
    version: '7.0.0-test.99',
    date: '2019-11-18',
    deprecations: [
      {
        subject: 'TestScheduler',
        subjectApiSymbol: ApiSymbols.class,
        subjectAction: 'property-coldObservables',
        sourceLink: 'https://github.com/ReactiveX/rxjs/blob/7.0.0-alpha.0/src/internal/testing/TestScheduler.ts#L44',
        itemType: 'deprecation',
        breakingVersion: '7.0.0-test.99',
        breakingSubjectAction: 'property-coldObservables-to-private',
        deprecationMsgCode: 'Class `TestScheduler` deprecate the public property `coldObservables`',
        reason: '@TODO `TestScheduler` deprecates public `coldObservables` property and makes it protected as it is and internal.',
        implication: '@TODO',
        exampleBefore: '@TODO',
        exampleAfter: '@TODO'
      }
    ],
    breakingChanges: [
      {
        subject: 'TestScheduler',
        subjectApiSymbol: ApiSymbols.class,
        subjectAction: 'property-coldObservables-to-private',
        itemType: 'breakingChange',
        deprecationVersion: '7.0.0-test.99',
        deprecationSubjectAction: 'property-coldObservables',
        breakingChangeMsg: 'Class `TestScheduler` changed property `coldObservables` to private'
      }
    ]
  }
]
```